#:kivy 2.1

<AudioTimeline>:
  canvas.before:
    Color:
      rgba: 1, 1, 1, .8
    Rectangle:
      pos: self.pos
      size: self.size

  BoxLayout:
    orientation: 'horizontal'
    pos: root.pos
    size: root.size
    padding: 0, 5

    BoxLayout:
      id: box_yaxis
      orientation: 'vertical'
      size_hint_x: 1

    ScrollView:
      id: scroll_tl
      do_scroll_y: False
      size_hint_x: 20
      scroll_type: ['bars', 'content']
      scroll_distance: 40

      MDBoxLayout:
        id: box_tl
        orientation: 'vertical'
        adaptive_width: True

        Widget:
          id: seekbar
          height: 0
          size_hint_y: None

          canvas:
            Color:
              rgba: 0, 1, 0, 1
            Rectangle:
              size: (5, scroll_tl.height)

<AudioToolbarIconButton@MDIconButton>:
  icon_size: '20sp'

<AudioToolbarIcon@MDIcon>:
  font_size: '20sp'

<AudioToolbar>:
  height: dp(54)

  ScrollView:
    do_scroll: False
    pos: root.pos
    size: root.size

    MDBoxLayout:
      id: box
      orientation: 'horizontal'
      padding: dp(5), 0
      spacing: dp(20)

      MDBoxLayout:
        orientation: 'horizontal'
        height: root.height
        size_hint_y: None
        adaptive_width: True

        AudioToolbarIconButton:
          id: play
          icon: 'play'
          pos_hint: {'center_y': .5}
          on_press: root.play()

        AudioToolbarIconButton:
          id: pause
          icon: 'pause'
          pos_hint: {'center_y': .5}
          on_press: root.pause()

        AudioToolbarIconButton:
          id: stop
          icon: 'stop'
          pos_hint: {'center_y': .5}
          on_press: root.stop()

        AudioToolbarIconButton:
          id: magnify_plus
          icon: 'magnify-plus-outline'
          pos_hint: {'center_y': .5}
          on_press: root.magnify(mode='plus')

        AudioToolbarIconButton:
          id: magnify_minus
          icon: 'magnify-minus-outline'
          pos_hint: {'center_y': .5}
          on_press: root.magnify(mode='minus')

      MDBoxLayout:
        height: root.height
        size_hint_y: None
        adaptive_width: True

        MDDropDownItem:
          id: ch
          pos_hint: {'center_y': .55}
          text: '00ch'
          on_press: root.ch_window_menu.open()

      Widget:

      MDBoxLayout:
        orientation: 'horizontal'
        height: root.height
        spacing: dp(15)
        size_hint_y: None
        adaptive_width: True

        AudioToolbarIcon:
          icon: 'volume-low'
          pos_hint: {'center_y': .5}

        MDSlider:
          id: volume
          width: dp(150)
          size_hint_x: None
          pos_hint: {'center_y': .5}
          min: 0.
          max: 1.
          value: 1.
          hint: False

        AudioToolbarIcon:
          icon: 'volume-high'
          pos_hint: {'center_y': .5}

      MDBoxLayout:
        height: root.height
        size_hint_y: None
        adaptive_width: True

        AudioToolbarIconButton:
          id: close
          icon: 'close'
          pos_hint: {'center_y': .5}
          on_press: root.close()
