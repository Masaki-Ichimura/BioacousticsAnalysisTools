<AudioTimeline>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, .8
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'horizontal'
        pos: root.pos
        size: root.size
        padding: 0, 5

        BoxLayout:
            id: box_yaxis
            size_hint_x: 1
            orientation: 'vertical'

        ScrollView:
            id: scroll_tl
            do_scroll_y: False
            size_hint_x: 20
            scroll_type: ['bars', 'content']
            scroll_distance: 40

            BoxLayout:
                id: box_tl
                orientation: 'vertical'
                size_hint_x: None
                width: self.minimum_width

                Widget:
                    id: seekbar
                    height: 0
                    size_hint_y: None

                    canvas:
                        Color:
                            rgba: 0, 1, 0, 1
                        Rectangle:
                            size: (5, scroll_tl.height)

<AudioToolbar>:
    # わざわざ書かなくてもいいじゃん…でも要るんだよねぇこれ…
    height: box.minimum_height

    MDBoxLayout:
        id: box
        orientation: 'horizontal'
        width: root.width
        pos: root.pos
        spacing: 20
        adaptive_size: True

        MDBoxLayout:
            orientation: 'horizontal'
            adaptive_height: True

            MDIconButton:
                id: play
                icon: 'play'
                user_font_size: '16sp'
                on_press: root.play()

            MDIconButton:
                id: pause
                icon: 'pause'
                user_font_size: '16sp'
                on_press: root.pause()

            MDIconButton:
                id: stop
                icon: 'stop'
                user_font_size: '16sp'
                on_press: root.stop()

            MDIconButton:
                id: magnify_plus
                icon: 'magnify-plus-outline'
                user_font_size: '16sp'
                on_press: root.magnify(mode='plus')

            MDIconButton:
                id: magnify_minus
                icon: 'magnify-minus-outline'
                user_font_size: '16sp'
                on_press: root.magnify(mode='minus')

        MDBoxLayout:
            orientation: 'horizontal'
            width: 400
            size_hint_x: None
            height: box.minimum_height

            MDIcon:
                icon: 'volume-low'
                font_size: '16sp'
                size_hint_x: 1
                height: 10

            MDSlider:
                id: volume
                min: 0.
                max: 1.
                value: 1.
                hint: False
                size_hint_x: 5

            MDIcon:
                icon: 'volume-high'
                font_size: '16sp'
                size_hint_x: 1

        MDIconButton:
            id: close
            icon: 'close'
            user_font_size: '16sp'
            on_press: print(root.close(), root.height)
